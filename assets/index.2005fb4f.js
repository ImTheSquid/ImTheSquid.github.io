import{S as e,i as t,p as n,e as l,f as s,g as a,h as i,j as o,k as r,q as c,r as d,n as f,l as u,v as p,s as m,w as h,x as g,a as b,y as v,t as $,z as w,c as D,m as x,d as y,A as U,B as k,C as F,D as C,E as L}from"./vendor.ad675d4c.js";import{N as B}from"./Navbar.0be10f16.js";function R(e){let t,n,p,m,h,g,b,v,$,w,D,x,y,U,k,F,C=e[0].name+"",L=(e[0].size/1e6).toFixed(2)+"";return{c(){t=l("hr"),n=s(),p=l("div"),m=l("p"),h=a(C),g=s(),b=l("p"),v=a(L),$=a(" MB"),w=s(),D=l("button"),x=a("Remove"),y=s(),U=l("hr"),i(t,"class","svelte-othsv4"),i(b,"class","fileSize svelte-othsv4"),i(D,"class","removeButton svelte-othsv4"),D.disabled=e[1],i(p,"class","parent svelte-othsv4"),i(U,"class","svelte-othsv4")},m(l,s){o(l,t,s),o(l,n,s),o(l,p,s),r(p,m),r(m,h),r(p,g),r(p,b),r(b,v),r(b,$),r(p,w),r(p,D),r(D,x),o(l,y,s),o(l,U,s),k||(F=c(D,"click",e[2]),k=!0)},p(e,[t]){1&t&&C!==(C=e[0].name+"")&&d(h,C),1&t&&L!==(L=(e[0].size/1e6).toFixed(2)+"")&&d(v,L),2&t&&(D.disabled=e[1])},i:f,o:f,d(e){e&&u(t),e&&u(n),e&&u(p),e&&u(y),e&&u(U),k=!1,F()}}}function j(e,t,n){let{fileData:l}=t,{disabled:s}=t;return e.$$set=e=>{"fileData"in e&&n(0,l=e.fileData),"disabled"in e&&n(1,s=e.disabled)},[l,s,function(t){p.call(this,e,t)}]}class z extends e{constructor(e){super(),t(this,e,j,R,n,{fileData:0,disabled:1})}}function M(e,t,n){const l=e.slice();return l[8]=t[n],l}function S(e){let t,n,l=e[0],s=[];for(let i=0;i<l.length;i+=1)s[i]=E(M(e,l,i));const a=e=>b(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=h()},m(e,l){for(let t=0;t<s.length;t+=1)s[t].m(e,l);o(e,t,l),n=!0},p(e,n){if(19&n){let i;for(l=e[0],i=0;i<l.length;i+=1){const a=M(e,l,i);s[i]?(s[i].p(a,n),$(s[i],1)):(s[i]=E(a),s[i].c(),$(s[i],1),s[i].m(t.parentNode,t))}for(g(),i=l.length;i<s.length;i+=1)a(i);v()}},i(e){if(!n){for(let e=0;e<l.length;e+=1)$(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)b(s[t]);n=!1},d(e){U(s,e),e&&u(t)}}}function T(e){let t,n,a,d,p,m;return{c(){t=l("div"),n=l("p"),n.textContent="Drag and Drop or Manual Select:",a=s(),d=l("button"),d.textContent="Upload Files",i(t,"class","manualUpload svelte-176fuhe")},m(l,s){o(l,t,s),r(t,n),r(t,a),r(t,d),p||(m=c(d,"click",e[5]),p=!0)},p:f,i:f,o:f,d(e){e&&u(t),p=!1,m()}}}function E(e){let t,n;return t=new z({props:{fileData:e[8],disabled:e[1]}}),t.$on("click",(function(){return e[6](e[8])})),{c(){D(t.$$.fragment)},m(e,l){x(t,e,l),n=!0},p(n,l){e=n;const s={};1&l&&(s.fileData=e[8]),2&l&&(s.disabled=e[1]),t.$set(s)},i(e){n||($(t.$$.fragment,e),n=!0)},o(e){b(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function N(e){let t,n,s,d;return{c(){t=l("button"),n=a("Upload More Files"),i(t,"class","uploadMore svelte-176fuhe"),t.disabled=e[1]},m(l,a){o(l,t,a),r(t,n),s||(d=c(t,"click",e[7]),s=!0)},p(e,n){2&n&&(t.disabled=e[1])},d(e){e&&u(t),s=!1,d()}}}function O(e){let t,n,a,d,f,p,m,D,x,y;const U=[T,S],k=[];function F(e,t){return 0===e[0].length?0:1}n=F(e),a=k[n]=U[n](e);let C=e[0].length>0&&N(e);return{c(){t=l("div"),a.c(),d=s(),f=l("input"),p=s(),C&&C.c(),m=h(),i(f,"type","file"),f.multiple=!0,i(f,"id","fileUpload"),i(f,"accept",".dlfc"),i(f,"class","svelte-176fuhe"),i(t,"class","uploadBox svelte-176fuhe"),i(t,"disabled",e[1])},m(l,s){o(l,t,s),k[n].m(t,null),r(t,d),r(t,f),o(l,p,s),C&&C.m(l,s),o(l,m,s),D=!0,x||(y=[c(f,"input",e[3]),c(t,"drop",e[2]),c(t,"dragover",A)],x=!0)},p(e,[l]){let s=n;n=F(e),n===s?k[n].p(e,l):(g(),b(k[s],1,1,(()=>{k[s]=null})),v(),a=k[n],a?a.p(e,l):(a=k[n]=U[n](e),a.c()),$(a,1),a.m(t,d)),(!D||2&l)&&i(t,"disabled",e[1]),e[0].length>0?C?C.p(e,l):(C=N(e),C.c(),C.m(m.parentNode,m)):C&&(C.d(1),C=null)},i(e){D||($(a),D=!0)},o(e){b(a),D=!1},d(e){e&&u(t),k[n].d(),e&&u(p),C&&C.d(e),e&&u(m),x=!1,w(y)}}}const A=e=>e.preventDefault();function I(e,t,n){let{files:l}=t,{disabled:s}=t;function a(e){const t=l.indexOf(e);1===l.length?n(0,l=[]):(l.splice(t,1),n(0,l))}return e.$$set=e=>{"files"in e&&n(0,l=e.files),"disabled"in e&&n(1,s=e.disabled)},[l,s,function(e){if(e.preventDefault(),e.dataTransfer.files){const t=[...e.dataTransfer.files];n(0,l=[...l,...t.filter((e=>e.name.endsWith(".dlfc")))])}},function(e){const t=[...e.target.files];n(0,l=[...l,...t.filter((e=>e.name.endsWith(".dlfc")))])},a,()=>document.getElementById("fileUpload").click(),e=>a(e),()=>document.getElementById("fileUpload").click()]}class W extends e{constructor(e){super(),t(this,e,I,O,m,{files:0,disabled:1})}}function q(e,t){var n=new e.constructor(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function H(e){let t,n,s,i;return{c(){t=l("button"),n=a("Reassemble File"),t.disabled=e[1]},m(l,a){o(l,t,a),r(t,n),s||(i=c(t,"click",e[2]),s=!0)},p(e,n){2&n&&(t.disabled=e[1])},d(e){e&&u(t),s=!1,i()}}}function _(e){let t,n,a,c,d,f,p,m,h,g,v,w,U;function L(t){e[3](t)}t=new B({});let R={disabled:e[1]};void 0!==e[0]&&(R.files=e[0]),m=new W({props:R}),k.push((()=>F(m,"files",L)));let j=e[0].length>0&&H(e);return{c(){D(t.$$.fragment),n=s(),a=l("div"),c=l("h1"),c.textContent="DLFC Converter",d=s(),f=l("h4"),f.innerHTML="This utility will only reassemble one full file at a time.<br/>Upload your DLFC files to get started:",p=s(),D(m.$$.fragment),g=s(),j&&j.c(),v=s(),w=l("a"),w.textContent="Download Files",i(w,"href","/"),i(w,"download","test"),i(w,"id","downloadLink"),i(w,"class","svelte-4l12rt"),i(a,"class","parent svelte-4l12rt")},m(e,l){x(t,e,l),o(e,n,l),o(e,a,l),r(a,c),r(a,d),r(a,f),r(a,p),x(m,a,null),r(a,g),j&&j.m(a,null),r(a,v),r(a,w),U=!0},p(e,[t]){const n={};2&t&&(n.disabled=e[1]),!h&&1&t&&(h=!0,n.files=e[0],C((()=>h=!1))),m.$set(n),e[0].length>0?j?j.p(e,t):(j=H(e),j.c(),j.m(a,v)):j&&(j.d(1),j=null)},i(e){U||($(t.$$.fragment,e),$(m.$$.fragment,e),U=!0)},o(e){b(t.$$.fragment,e),b(m.$$.fragment,e),U=!1},d(e){y(t,e),e&&u(n),e&&u(a),y(m),j&&j.d()}}}function G(e,t,n){L.title="DLFC Converter",L.description="Converts DLFC files into their original form.";let l=[],s=!1;return[l,s,function(){n(1,s=!0),async function(e){let t=[];for(const a of e)try{t.push(new Uint8Array(await a.arrayBuffer()))}catch{return[!1,"Unable to read file data"]}t=t.filter((e=>e.length>=5&&223===e[0]&&0===e[1])),t.sort(((e,t)=>e[2]-t[2]));let n=0,l=new Set,s=new Uint8Array;new TextDecoder("utf8");for(const a of t){if(a[2]>=a[3]||0!==n&&a[3]>n)return[!1,"Files not part of same group."];l.add(a[2]),n=a[3],s=q(s,a.slice(4))}return function(e){for(let t=0;t<e.length;t++)if(!e.has(t))return!1;return!0}(l)&&0!==l.size?[!0,s]:[!1,"Some chunks do not exist."]}(l).then((e=>{if(!e[0])return alert(`Failed to reassemble files: ${e[1]}`),n(0,l=[]),void n(1,s=!1);const t=window.URL.createObjectURL(new Blob([e[1]],{type:"application/octet-stream"})),a=document.getElementById("downloadLink");a.href=t;const i=l[0].name;a.download=i.slice(i.indexOf("_")+1,i.length-5),a.click(),window.URL.revokeObjectURL(t),alert("File reassembly complete!"),n(1,s=!1),n(0,l=[])}))},function(e){l=e,n(0,l)}]}class J extends e{constructor(e){super(),t(this,e,G,_,m,{})}}export{J as default};
